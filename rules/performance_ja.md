# パフォーマンス最適化

## モデル選択戦略

**Haiku 4.5**（Sonnetの90%の性能、3倍のコスト削減）：
- 頻繁に呼び出される軽量エージェント
- ペアプログラミングおよびコード生成
- マルチエージェントシステム内のワーカーエージェント

**Sonnet 4.5**（最高のコーディングモデル）：
- メイン開発作業
- マルチエージェントワークフローのオーケストレーション
- 複雑なコーディングタスク

**Opus 4.5**（最深の推論能力）：
- 複雑なアーキテクチャ上の決定
- 最大限の推論が必要な場合
- リサーチと分析タスク

## コンテキストウィンドウ管理

以下のタスクではコンテキストウィンドウの最後の20%を避けてください：
- 大規模なリファクタリング
- 複数ファイルにまたがる機能実装
- 複雑な相互作用のデバッグ

コンテキスト感度の低いタスク：
- 単一ファイルの編集
- 独立したユーティリティの作成
- ドキュメントの更新
- シンプルなバグ修正

## Ultrathink + プランモード

深い推論が必要な複雑なタスク向け：
1. 拡張思考のために`ultrathink`を使用
2. **プランモード**を有効にして構造的アプローチを実施
3. 複数の批判ラウンドで「エンジンを吹かす」
4. 多様な分析のため分割役割サブエージェントを使用

## ビルドトラブルシューティング

ビルドが失敗した場合：
1. **build-error-resolver**エージェントを使用
2. エラーメッセージを分析
3. 段階的に修正
4. 各修正後に検証
